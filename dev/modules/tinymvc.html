<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="tinymvc.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shCore.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushPhp.min.js"></script>
	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCoreDefault.min.css" />
</head>
<body>
	<h1>View Terminal to see what happened.</h1>
	<h1>View Page Source to see the code. (It's simple)</h1>
	<br>
	<button id="click">Click Me!</button>
	<br>
	<button id="one">URL 1</button>
	<button id="two">URL 2</button>
	<button id="three">URL 3</button>
	<script>
		/*Example :D*/
		Model.create({
			test: 'dddd',
			workspace: {
				documents: {
					attributes: {
						title: null
					}
				}
			},
			color: 'red',
			buttonHasBeenClicked: false
		});
		View.create(function(name, val, states, model){
			switch(name){
				case 'test':
					console.log('test changed to ' + val);
					break;
				//you can reference next level with hyphen
				case 'workspace-documents-attributes-title':
					console.log('changed title to: ' + val);
					break;
				case 'buttonHasBeenClicked':
				 	//getting the most recently changed name
					alert('You clicked the button! Model.lastChanged = "' + Model.lastChanged + '"');
					//get previous states of a model var
					console.log("First state of " + name + " is " + states[0] + " and most recent state is: " + states[states.length - 1]);
					break;
			}
		});
		//model in param is the same as directly calling Model.data :)
		Controller.create(function(model){
			if(Model.data.color === model.color) Model.modify('test', true); //tel the view what you changed with modify
			if(model.color === 'red') Model.modify('test', false);
			//you can add/change Model data without telling the View
			model.something = 'value';
			//may be more comfortable to get data with tinyMVC syntax (arrays or hyphens) :)
			var something = Model.get('workspace-documents-attributes-title');
			var something = model.workspace.documents.attributes.title; //works as well
			//you can always use either an array or hyphens, your choice
			Model.modify(['workspace', 'documents', 'attributes', 'title'], 'Array test'); //works!
			Model.modify('workspace-documents-attributes-title', 'Hyphen test'); //works!
			Model.cascade({ //modify multiple things at once
				'workspace-documents-attributes-title': 'Changing multiple vars!',
				'test': true
			});
			//a more practical example
			$(document).on('click', '#click', function(){
				var bool = (model.buttonHasBeenClicked) ? false : true;
				Model.modify('buttonHasBeenClicked', bool);
			});
			$(document).on('click', '#one', function(){
				Router.goTo('url1');
			});
			$(document).on('click', '#two', function(){
				Router.goTo('url2');
			});
			$(document).on('click', '#three', function(){
				Router.goTo('url3');
			});
		});
		Router.create(function(url, count){
			//take url as parameter and call with Router.goTo()
				switch(url){
					case 'url1':
						console.log("Welcome to page 1.");
						break;
					case 'url2':
						console.log("Welcome to page 2.");
						break;
					case 'url3':
						console.log("Welcome to page 3.");
						break;
				}
				console.log(count);
		});
		Router.run(); //run func for current url
		//finally, to get the current Model
		var savedModel = Model.retrieve();
	</script>
</body>
</html>